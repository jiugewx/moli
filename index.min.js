!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("mobx")):"function"==typeof define&&define.amd?define(["exports","react","mobx"],e):e(t.Moli={},t.React,t.mobx)}(this,function(t,e,n){"use strict";function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t[e],r=x[e],i=o?!0===n?function(){r.apply(this,arguments),o.apply(this,arguments)}:function(){o.apply(this,arguments),r.apply(this,arguments)}:r;t[e]=i}function r(t,e){if(null==t||null==e||"object"!==(void 0===t?"undefined":p(t))||"object"!==(void 0===e?"undefined":p(e)))return t!==e;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var o=void 0,r=n.length-1;o=n[r];r--)if(e[o]!==t[o])return!0;return!1}function i(t){var n=t;if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||s.Component.isPrototypeOf(n))){var o=function(t){function e(){return l(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,t),d(e,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),e}(e.Component);return o.displayName=n.displayName||n.name,o.contextTypes=n.contextTypes,o.propTypes=n.propTypes,o.defaultProps=n.defaultProps,i(o)}if(!n)throw new Error("Please pass a valid component to 'observer'");return u(n.prototype||n),n.isMobXReactObserver=!0,n}function u(t){o(t,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(e){o(t,e)}),t.shouldComponentUpdate||(t.shouldComponentUpdate=x.shouldComponentUpdate)}function c(t){var e=P(t);return function(t){function o(t,e){l(this,o);var r=y(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,e));if(r.$state&&g(r.$state))for(var i in r.$state)n.extendObservable(r.$state,h({},i,r.$state[i]));return r}return b(o,e),o}()}function a(t,e){return O(t)&&e[E+t]?e[E+t]:null}function f(t,e){var n={};if(O(t)){var o=a(t,e);n[E+t]=o}if(j(t))for(var r=0;r<t.length;r++){var i=a(t[r],e),u=t[r];n[E+u]=i}return n}var s="default"in e?e.default:e,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},m=function(t){return void 0===t},v=function(t){return"function"==typeof t},O=function(t){return"string"==typeof t},j=function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=function(t){return!j(t)&&"object"===(void 0===t?"undefined":p(t))},w=function(t){return v(t)&&t.prototype&&!!t.prototype.render&&!!t.prototype.setState&&!!t.prototype.forceUpdate},_=function t(e){var n=null;if(j(e)){n=[];for(var o=0;o<e.length;o++)n.push(t(e[o]))}else if(g(e)){n={};for(var r in e)n[r]=t(e[r])}else n=e;return n},x={componentWillMount:function(){function t(t){var e=this[t],o=new n.Atom("reactive "+t);Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:function(){return o.reportObserved(),e},set:function(t){!c&&r(e,t)?(e=t,u=!0,o.reportChanged(),u=!1):e=t}})}var e=this,o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,u=!1,c=!1;t.call(this,"props"),t.call(this,"state");var a=this.render.bind(this),f=null,p=!1,l=function(){p=!1;var t=void 0;return f.track(function(){try{t=n.extras.allowStateChanges(!1,a)}catch(t){throw t}}),t};this.render=function(){return f=new n.Reaction(o+"#"+i+".render()",function(){if(!p&&(p=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e.__$mobxIsUnmounted)){var t=!0;try{c=!0,u||s.Component.prototype.forceUpdate.call(e),t=!1}finally{c=!1,t&&f.dispose()}}}),l.$mobx=f,e.render=l,l()}},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(t,e){return this.state!==e||r(this.props,t)}},P=function(t){var e=t;return t.isMobXReactObserver||(e=i(t)),e};i(function(t){return(0,t.children)()}).propTypes={children:function(t,e,n,o,r){if("function"!=typeof t[e])return new Error("Invalid prop `"+r+"` of type `"+p(t[e])+"` supplied to `"+n+"`, expected `function`.")}};var $=function t(e){if(l(this,t),!g(e))throw Error("[moli] Model need argument which type is a Object");Object.defineProperty(this,"$schema",{configurable:!0,enumerable:!0,writable:!1,value:_(e)}),S(this,this.$schema.state),C(this,this,this.$schema.computed),U(this,this,this.$schema)},S=function(t,e){if(void 0===e)return t;if("object"!==(void 0===e?"undefined":p(e)))return console.warn("state must be a object!"),t;for(var o in e)n.extendObservable(t,h({},o,e[o]))},C=function(t,e,o){if(m(o))return t;for(var r in o)!function(r){n.extendObservable(t,h({},r,n.computed(function(){return o[r].apply(e,arguments)})))}(r)},U=function(t,e,o){if(m(o))return t;for(var r in o)!function(r){var i=o[r];v(i)&&Object.defineProperty(t,r,{enumerable:!1,value:n.action.bound(function(){return i.apply(e,arguments)}),writable:!1,configurable:!0})}(r)},I=function(t){if(w(t))return c(t);if(m(t)||!g(t))throw Error("this `bound` function should accept a object as arguments");return function(e){var o=P(e),r=function(e){function n(e,o){l(this,n);var r=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,o));return r.$state=Object.assign(new function t(e){l(this,t),S(this,e.state),C(this,this,e.computed),U(t.prototype,this,e)}(t),r),r}return b(n,o),n}();for(var i in t)!function(e){v(t[e])&&Object.defineProperty(o.prototype,e,{enumerable:!1,value:n.action.bound(function(){return t[e].apply(this.$state,arguments)}),writable:!1,configurable:!0})}(i);return r}};I.state=c,I.action=n.action.bound;var E="$",M={},R=function(t,e){var n=P(t);return m(e)?n.defaultProps=Object.assign(M,n.defaultProps):n.defaultProps=Object.assign(f(e,M),n.defaultProps),n};t.bound=I,t.inject=function(t){return w(t)?R(t):function(n){return n?R(n,t):R(e.Component,t)}},t.createStore=function(t){if(m(t)||!g(t))throw Error("[moli] createStore need argument which type is a Object");for(var e in t){var n=t[e];M[E+e]=new $(n)}return M},t.observer=i,t.runInAction=n.runInAction,t.useStrict=n.useStrict,t.action=n.action,Object.defineProperty(t,"__esModule",{value:!0})});
